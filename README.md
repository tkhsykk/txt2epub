# txt2epub
勉強用その2

機能:  
小説家になろうからダウンロードした章ごとのtxtファイルを1つのepubで出力する。現状では縦書き表示のみを想定。Python勉強用  
そのうちGUIにしたい。  

  

___


## 入力仕様

- `text/<作品フォルダ>/` 内の `.txt` ファイル群を対象
- 各 `.txt` ファイルの構造：
  - 1行目：章タイトル（→ `<h2>` に使用）
  - 2行目以降：本文

## 段落処理

- 改行区切りで1行ずつ処理
- 以下の条件で段落を `<p>` タグで分割：
  - 字送り行（行頭が全角スペース または 半角スペース2文字以上）
    - → 新しい段落開始（スペースはそのまま保持）
  - 空行1〜2行：空段落（`<p></p>`）として処理
  - 空行3行以上：改ページ（`<hr class="page-break" />`）を挿入

## ルビ変換

以下の記法を `<ruby>` に自動変換：

| 入力形式         | 出力HTML例                                         |
|------------------|--------------------------------------------------|
| `｜漢字《かな》` | `<ruby>漢字<rt>かな</rt></ruby>`                 |
| `漢字《かな》`   | `<ruby>漢字<rt>かな</rt></ruby>`（`｜` 省略可）  |
| `漢字(かな)`     | `<ruby>漢字<rt>かな</rt></ruby>`（括弧形式にも対応） |

## 半角数字の装飾

- 半角1〜2桁の数字に対して、自動で `.tcy` クラスを付与。スタイルシートで縦中横に適用：
- 3桁以上の数字や全角数字には変換を行わない。

```html
<span class="tcy">42</span>
```


## 表紙について
`text/` 配下に`cover.jpg/cover.png`がある場合は表紙に登録

